version: 2

sources:
  - name: summary_your_dataset    
    database: peppy-primacy-455413-d8      
    schema: summary_your_dataset      
    tables:
      - name: change_data_type  

models:
  - name: dim_product
    description: "Dimension table for product information"
    columns:
      - name: product_id
        description: "Unique identifier for the product"
        tests:
          - not_null
          - unique
  - name: dim_user
    description: "Dimension table for user information"
    columns:
      - name: user_id_db
        description: "Unique identifier for the user"
        tests:
          - not_null
          - unique 
      - name: email_address
        description: "Email address of the user"
        tests:
          - not_null
          - unique
  - name: dim_store
    description: "Dimension table for store information"
    columns:
        - name: store_id
          description: "Unique identifier for the store"
          tests:
            - not_null
            - unique
  - name: dim_time
    description: "Dimension table for time information extracted from timestamps"
    columns:
        - name: time_id
          description: "Unique identifier for each time entry"
          tests:
            - not_null
            - unique
        - name: time_stamp
          description: "Original timestamp from the source"
        - name: local_time
          description: "Local datetime from the source"
        - name: year
          description: "Year extracted from timestamp"
          tests:
            - not_null
        - name: month
          description: "Month extracted from timestamp"
          tests:
            - not_null
        - name: day
          description: "Day extracted from timestamp"
          tests:
            - not_null
        - name: hour
          description: "Hour extracted from timestamp"
          tests:
            - not_null
        - name: minute
          description: "Minute extracted from timestamp"
          tests:
            - not_null
        - name: week_of_year
          description: "Week number of the year"
          tests:
            - not_null
        - name: quarter
          description: "Quarter of the year"
          tests:
            - not_null
        - name: day_of_week
          description: "Day of the week (e.g., Monday)"
          tests:
            - not_null
  - name: dim_order
    description: "Dimension table for order information"
    columns:
        - name: order_id
          description: "Unique identifier for the order"
          tests:
            - not_null
            - unique
        - name: is_paypal
          description: "Indicates if the order was paid via PayPal"
          tests:
            - not_null
  - name: dim_recommendation
    description: "Dimension table for recommendation information"
    columns:
        - name: recommendation_id
          description: "Unique identifier for the recommendation"
          tests:
            - not_null
            - unique
        - name: recommendation
          description: "Type or content of the recommendation"
        - name: recommendation_product_id
          description: "Product ID recommended"
          tests:
            - not_null
        - name: recommendation_clicked_position
          description: "Position where the recommendation was clicked"
        - name: show_recommendation
          description: "Status of recommendation display"
  - name: dim_marketing
    description: "Dimension table for marketing and traffic source information"
    columns:
        - name: marketing_id
          description: "Unique identifier for the marketing entry"
          tests:
            - not_null
            - unique
        - name: utm_source
          description: "Source of the traffic"
        - name: utm_medium
          description: "Medium of the traffic"
        - name: current_url
          description: "Current URL visited"
        - name: referrer_url
          description: "Referring URL"
  - name: dim_cart_product
    description: "Dimension table for products in the cart"
    columns:
        - name: cart_product_id
          description: "Unique identifier for the cart product entry"
          tests:
            - not_null
            - unique
        - name: product_id
          description: "Product ID in the cart"
          tests:
            - not_null
        - name: amount
          description: "Amount of the product in the cart"
        - name: price
          description: "Price of the product"
        - name: currency
          description: "Currency of the price"
        - name: option_id
          description: "Option ID for the product variant"
        - name: option_label
          description: "Label of the option"
  - name: fact_checkout_success
    description: "Fact table for successful checkout events"
    columns:
        - name: fact_id
          description: "Unique identifier for the fact entry"
          tests:
            - not_null
            - unique
        - name: order_id
          description: "Order ID linked to dim_order"
          tests:
            - not_null
        - name: time_id
          description: "Time ID linked to dim_time"
          tests:
            - not_null
        - name: user_id_db
          description: "User ID linked to dim_user"
          tests:
            - not_null
        - name: product_id
          description: "Product ID linked to dim_product"
          tests:
            - not_null
        - name: store_id
          description: "Store ID linked to dim_store"
        - name: total_price
          description: "Total price of the checkout"
          tests:
            - not_null
        - name: quantity
          description: "Total quantity of products in the checkout"
          tests:
            - not_null
        - name: is_paypal
          description: "Payment method indicator"
        - name: cart_product_count
          description: "Number of products in the cart"
          tests:
            - not_null
  - name: fact_product_views
    description: "Fact table for product view events"
    columns:
        - name: fact_id
          description: "Unique identifier for the fact entry"
          tests:
            - not_null
            - unique
        - name: time_id
          description: "Time ID linked to dim_time"
          tests:
            - not_null
        - name: user_id_db
          description: "User ID linked to dim_user"
          tests:
            - not_null
        - name: product_id
          description: "Product ID linked to dim_product"
          tests:
            - not_null
        - name: store_id
          description: "Store ID linked to dim_store"
        - name: view_count
          description: "Number of times the product was viewed"
          tests:
            - not_null
  - name: fact_recommendation_clicks
    description: "Fact table for recommendation click events"
    columns:
        - name: fact_id
          description: "Unique identifier for the fact entry"
          tests:
            - not_null
            - unique
        - name: time_id
          description: "Time ID linked to dim_time"
          tests:
            - not_null
        - name: user_id_db
          description: "User ID linked to dim_user"
          tests:
            - not_null
        - name: recommendation_id
          description: "Recommendation ID linked to dim_recommendation"
          tests:
            - not_null
        - name: click_count
          description: "Number of clicks on the recommendation"
          tests:
          - not_null
  - name: fact_search_activity
    description: "Fact table for search activity events"
    columns:
        - name: fact_id
          description: "Unique identifier for the fact entry"
          tests:
            - not_null
            - unique
        - name: time_id
          description: "Time ID linked to dim_time"
          tests:
            - not_null
        - name: user_id_db
          description: "User ID linked to dim_user"
          tests:
            - not_null
        - name: key_search
          description: "Search keyword used by the user"
          tests:
            - not_null
        - name: search_count
          description: "Number of searches performed"
          tests:
            - not_null
  - name: fact_cart_activity
    description: "Fact table for add-to-cart activity events"
    columns:
        - name: fact_id
          description: "Unique identifier for the fact entry"
          tests:
            - not_null
            - unique
        - name: time_id
          description: "Time ID linked to dim_time"
          tests:
            - not_null
        - name: user_id_db
          description: "User ID linked to dim_user"
          tests:
            - not_null
        - name: cart_product_id
          description: "Cart product ID linked to dim_cart_product"
          tests:
            - not_null
        - name: add_to_cart_count
          description: "Number of times the product was added to cart"
          tests:
            - not_null
  - name: fact_traffic_source
    description: "Fact table for traffic source events"
    columns:
        - name: fact_id
          description: "Unique identifier for the fact entry"
          tests:
            - not_null
            - unique
        - name: time_id
          description: "Time ID linked to dim_time"
          tests:
            - not_null
        - name: user_id_db
          description: "User ID linked to dim_user"
          tests:
            - not_null
        - name: marketing_id
          description: "Marketing ID linked to dim_marketing"
          tests:
            - not_null
        - name: visit_count
          description: "Number of visits from the traffic source"
          tests:
            - not_null